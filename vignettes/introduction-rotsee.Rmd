---
title: "introduction-rotsee"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{introduction-rotsee}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(rotsee)
```


## what is rotsee?
Rotsee provides the calculation core for performing RothC calculations. The package leaves 
data pre-processing to the user to make the use fully universal. 



## basis of the RothC model
An extensive description of the RothC model can be found in Coleman and Jenkinson, 1996.
RothC is well-established model to calculate the development of carbon stocks in soils
based on long-term experimental data from Rothamsted. RothC uses 5 carbon pools to describe
carbon turnover. The inert organic matter (IOM) pool is fixed and based on the calculation
developed by Fallon et al., 1998. Remaining four pools are all active and are in order
of highest to lowest decomposition rate decomposable plant material (DPM), resistant plant material (RPM),
microbial biomass (BIO) and humified organic matter (HUM). Their decomposition rates -
adjusted with rate modifying factors based on temperature, soil moisture, and crop cover -
are used to calculate carbon changes at each timestep. A representation of the overall
model functionality is listed in Figure 1.

```{r Figure 1, echo = FALSE, out.width = '70%'}

knitr::include_graphics('Rothc_structure.png')

```


## required and optional data
### soil properties
The clay and organic matter content, together with the dry soil bulk density. If the bulk
density is unknown, rotsee allows it to be calculated using `rc_calculate_bd`

### crop rotation data (optional)
Information on the crop rotation, including start and end of crop growth, crop humification
coefficient, and carbon input from crops. If the latter is not known, it can be calculated based
on crop harvest characteristics using `rc_calculate_b_c_of`. Crop rotations can be extended
to envelop longer simulation periods using `rc_extend_crops`.

### amendment data (optional)
Information on the applied amendment, including application date, amendment humification
coefficient, and carbon input from the amendment. Amendment applications can be extended
to envelop longer simulation periods using `rc_extend_amendments`.

### weather data (optional)
Monthly weather data, which includes mean temperature, mean precipitation, and actual
evapotranspiration  or reference evapotranspiration with a factor to re-calculate to actual.
Weather data can either be provided for each month (in which case it will be extended across
each year of the simulation period) or for each month and each year in the simulation. If 
weather data is not provided, Dutch averages will be used.
TO DO once brance facil-refact is merged add description of facilitating implementation of factor

### sampling information
Information of the depth of the cultivation layer and the sampling depth.

### Model parameters
Parameters to define model run operation. These include standard RothC parameters 
(initial pool distribution, pool-dependent decomposition rates), together with parameters
steering the calculation: type of pool initialization, output unit, method of solving 
linear differential equations, resolution of data output, and the start and end date
of the simulation.


## Model operation
TO DO
### simulation duration



## model outputs
TO DO

## examples of model runs

TO DO
